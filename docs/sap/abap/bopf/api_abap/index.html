<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Como usar la API de los BOPF desde ABAP">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="API desde ABAP" />
<meta property="og:description" content="Como usar la API de los BOPF desde ABAP" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://irodrigob.github.io/docs/sap/abap/bopf/api_abap/" />
<meta property="article:modified_time" content="2020-07-06T18:06:11+02:00" />
<title>API desde ABAP | Navi-developer</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.e40449dffab36960ca7d6bac529d52d7ab9f9d230ffe5de1799e29cb61bc0cb7.css" integrity="sha256-5ARJ3/qzaWDKfWusUp1S16ufnSMP/l3heZ4py2G8DLc=">
<script defer src="/en.search.min.9bf7534fafd10be6a0d2b375c3ec47108747e5944b9cbd8ad7feba95b2dc7a77.js" integrity="sha256-m/dTT6/RC&#43;ag0rN1w&#43;xHEIdH5ZRLnL2K1/66lbLcenc="></script>

<script defer src="/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js" integrity="sha256-dKi7B/C&#43;6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>Navi-developer</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/github/" class="collapsed ">Github</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/graph_ql/" class="collapsed ">GraphQL</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/hugo/" class="">Hugo</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/hugo/publicar_web_github/" class="">Publicar Web Github</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/mongodb/" class="">MongoDB</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/mongodb/usando_app/" class="">MongoDB en aplicaciones</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/mongodb/usando_app/mongoose/" class="">Conector Mongoose</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/mongodb/cloud/" class="collapsed ">MongoDB en cloud</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/python/" class="collapsed ">Python</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/react/" class="collapsed ">React</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/" class="">SAP</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/sap/abap/" class="collapsed ">ABAP</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/sap/abap/bopf/" class="collapsed ">BOPF</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/sap/abap/bopf/acciones/" class="">Acciones</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/bopf/api_abap/" class="active">API desde ABAP</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/bopf/plantillas_codigo_interno/" class="">CÃ³digo ejemplo dentro del BOPF</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/bopf/determinaciones/" class="">Determinaciones</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/bopf/nomenclaturas/" class="">Nomenclaturas</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/bopf/tablas/" class="collapsed ">Tablas</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/sentencias_74/" class="">Sentencias &gt;= 7.4</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/sap/abap/sentencias_74/bucles/" class="">Bucles</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/sentencias_74/condiciones/" class="">Condiciones</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/sentencias_74/conversiones/" class="">Conversiones</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/sentencias_74/filtros/" class="">Filtros</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/sentencias_74/lectura_tablas_diccionario/" class="">Lectura tablas del diccionario</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/sentencias_74/mapeo_campos/" class="">Mapeo de campos</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/sentencias_74/relleno_valores/" class="">Relleno de valores</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/sentencias_74/string_templates/" class="">String template</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/alv/" class="">ALV</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/archivelink/" class="collapsed ">Archivelink</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/bapis/" class="collapsed ">BAPIs</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/cds/" class="collapsed ">CDS</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/clases/" class="collapsed ">Clases</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/clases_desarrollo/" class="">Clases de desarrollo</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/funciones/" class="collapsed ">Funciones</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/idoc/" class="collapsed ">IDOC</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/notas/" class="">Notas de SAP</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/programas/" class="collapsed ">Programas</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/recursos_humanos/" class="collapsed ">Recursos humanos</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/rtts/" class="collapsed ">RTTS</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/tablas/" class="">Tablas de SAP</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/sap/abap/tablas/generales/" class="">Generales</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/transacciones/" class="">Transacciones</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/abap/utilidades_generales/" class="">Utilidades generales</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/BW/" class="collapsed ">BW</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/gateway/" class="collapsed ">Gateway</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/ui5/" class="collapsed ">UI5</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/ventas/" class="collapsed ">Ventas</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
  </ul>
  











  
<ul>
  
  <li>
    <a href="https://github.com/irodrigob" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>API desde ABAP</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#objetivo">Objetivo</a></li>
    <li><a href="#instanciar-variables-para-acceder-al-bopf">Instanciar variables para acceder al BOPF</a></li>
    <li><a href="#aÃ±adir-registro">AÃ±adir registro</a>
      <ul>
        <li><a href="#nodo-root">Nodo root</a></li>
      </ul>
    </li>
    <li><a href="#subnodo-del-root">Subnodo del ROOT</a></li>
    <li><a href="#modificar-registro">Modificar registro</a></li>
    <li><a href="#modificar-datos-en-bopf">Modificar datos en BOPF</a></li>
    <li><a href="#grabar-datos-en-bopf">Grabar datos en BOPF</a></li>
    <li><a href="#consulta-de-datos">Consulta de datos</a>
      <ul>
        <li><a href="#cuando-se-tiene-el-id-del-registro">Cuando se tiene el ID del registro</a></li>
        <li><a href="#los-datos-de-un-subnodo">Los datos de un subnodo</a></li>
        <li><a href="#hacer-consultas">Hacer consultas</a></li>
      </ul>
    </li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="objetivo">
  Objetivo
  <a class="anchor" href="#objetivo">#</a>
</h1>
<p>La API de acceso al ABAP es siempre la misma por eso voy a poner los ejemplos de cada tipo de operaciÃ³n que se quiera hacer.</p>
<p>Yo para estos casos me suelo crear un helper para simplificar las llamadas entre las clases del proceso y del BOPF.</p>
<h1 id="instanciar-variables-para-acceder-al-bopf">
  Instanciar variables para acceder al BOPF
  <a class="anchor" href="#instanciar-variables-para-acceder-al-bopf">#</a>
</h1>
<p>Lo primero que se suele hacer es instanciar las variables necesarias para operar con los BOPF.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">DATA mo_svc_mngr TYPE REF TO /bobf/if_tra_service_manager.
    DATA mo_txn_mngr TYPE REF TO /bobf/if_tra_transaction_mgr.
    DATA mo_conf_mngr TYPE REF TO /bobf/if_frw_configuration.
 TRY.
        &#34; InicializaciÃ³n del gestor transaccional actualizaciones, bloqueos, etc..
        mo_txn_mngr = /bobf/cl_tra_trans_mgr_factory=&gt;get_transaction_manager( ).

        &#34; CreaciÃ³n del el gestor de servicios del BOPF. Permite realizar las llamadas al BOPF para ejecutar validaciones, acciones, aÃ±adir, etc..
        &#34; Es la clase mÃ¡s importante ya que toda la gestiÃ³n CRUD se realiza en esta clase
        mo_svc_mngr = /bobf/cl_tra_serv_mgr_factory=&gt;get_service_manager( iv_bo_key ).

        &#34; CreaciÃ³n de la configuraciÃ³n del BOPF, permite obtener los metadas del BOPF
        mo_conf_mngr = /bobf/cl_frw_factory=&gt;get_configuration( iv_bo_key ).

      CATCH /bobf/cx_frw.
        &#34;TODO: Error handling...
    ENDTRY.
</code></pre></div><h1 id="aÃ±adir-registro">
  AÃ±adir registro
  <a class="anchor" href="#a%c3%b1adir-registro">#</a>
</h1>
<p>Cuando se aÃ±aden hay que tener en cuenta si se insertados datos dependiente de un nodo superior, o no. En un BOPF todos los nodos dependen del ROOT, al menos es lo que he visto, por lo tanto
aÃ±adir en el nodo ROOT es distinto que en un nodo &ldquo;hijo&rdquo;. Se muestra los ejemplos en ambos</p>
<h2 id="nodo-root">
  Nodo root
  <a class="anchor" href="#nodo-root">#</a>
</h2>
<p>A la tabla donde se guarda los datos que se van a enviar siempre se guarda la estructura de datos. Esa estructura es siempre la combinada, la que tiene los datos persistentes y transitorios. El motivo es que esa estructura tiene el
campo donde le indicaremos la clave del registro.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl"> DATA lt_mod TYPE /bobf/t_frw_modification.

    DATA(lo_header) = NEW zcar_bo_sc_header(  ).
    ASSIGN lo_header-&gt;* TO FIELD-SYMBOL(&lt;ls_header&gt;).
    &lt;ls_header&gt; = CORRESPONDING #( is_header ).
    &lt;ls_header&gt;-vbeln = iv_vbeln.
    &lt;ls_header&gt;-key = /bobf/cl_frw_factory=&gt;get_new_key( ).

    INSERT VALUE #( node = zif_car_bo_orders_c=&gt;sc_node-root
                          change_mode = /bobf/if_frw_c=&gt;sc_modify_create
                          key = lo_header-&gt;key
                          data = lo_header )
                 INTO TABLE lt_mod.
</code></pre></div><h1 id="subnodo-del-root">
  Subnodo del ROOT
  <a class="anchor" href="#subnodo-del-root">#</a>
</h1>
<p>Este ejemplo es cuando se aÃ±aden datos que dependen del root, ademÃ¡s es un buen ejemplo para ver como se aÃ±aden datos de una tabla interna. AquÃ­ de nuevo se usa la estructura combinada, que se instancia 
por cada nuevo registro. Si no lo hicieramos insertarÃ­amos siempre el Ãºltimo registro debido a los punteros de memoria.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">    LOOP AT it_positions ASSIGNING FIELD-SYMBOL(&lt;ls_positions&gt;).
      DATA(lv_tabix) = sy-tabix.

      DATA(lo_positions) = NEW zcar_bo_sc_positions(  ).
      ASSIGN lo_positions-&gt;* TO FIELD-SYMBOL(&lt;ls_bo_positions&gt;).

      &lt;ls_bo_positions&gt; = CORRESPONDING #( &lt;ls_positions&gt; ).
      &lt;ls_bo_positions&gt;-posnr = lv_tabix.
      &lt;ls_bo_positions&gt;-key = /bobf/cl_frw_factory=&gt;get_new_key( ).

      INSERT VALUE #( node = zif_car_bo_orders_c=&gt;sc_node-positions
                change_mode = /bobf/if_frw_c=&gt;sc_modify_create
                key = &lt;ls_bo_positions&gt;-key
                data = lo_positions
                source_node = zif_car_bo_orders_c=&gt;sc_node-root
                association = zif_car_bo_orders_c=&gt;sc_association-root-positions
                source_key = lo_header-&gt;key ) INTO TABLE lt_mod.

    ENDLOOP.
</code></pre></div><h1 id="modificar-registro">
  Modificar registro
  <a class="anchor" href="#modificar-registro">#</a>
</h1>
<p>Este ejemplo es como se harÃ­a en el nodo ROOT pero se puede extrapolar como se harÃ­a con el ejemplo de aÃ±adir en un nodo dependiente del ROOT.</p>
<p>Cuando se modificar siempre hay que leer los datos previamente a travÃ©s de la <em>querys</em> del BOPF. Una vez leÃ­do los datos se puede modificar.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">
INSERT VALUE #( node = zif_sat_orders_c=&gt;sc_node-root
                      change_mode = /bobf/if_frw_c=&gt;sc_modify_update
                      key = lo_header-&gt;key
                      data = lo_header )
             INTO TABLE et_mod.
</code></pre></div><h1 id="modificar-datos-en-bopf">
  Modificar datos en BOPF
  <a class="anchor" href="#modificar-datos-en-bopf">#</a>
</h1>
<p>Para que los datos del BOPF se graben primero se lanza el proceso de modificaciÃ³n, en este proceso es donde saltarÃ­an las validaciones propias.</p>
<p>En la clase de utilidades del BOPF que se esta indicada en el Ã­ndice de la secciÃ³n todo este proceso esta encapsulado para simplificar la operativa.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">   mo_svc_mngr-&gt;modify(
      EXPORTING
        it_modification = it_mod
      IMPORTING
        eo_change       = DATA(lo_change)
        eo_message      = eo_message ).

</code></pre></div><h1 id="grabar-datos-en-bopf">
  Grabar datos en BOPF
  <a class="anchor" href="#grabar-datos-en-bopf">#</a>
</h1>
<p>Una vez la modificaciÃ³n no devuelve errores es cuando se pueden grabar.</p>
<p>En la clase de utilidades del BOPF que se esta indicada en el Ã­ndice de la secciÃ³n todo este proceso esta encapsulado para simplificar la operativa.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl"> mo_txn_mngr-&gt;save(
        IMPORTING
          ev_rejected            = ev_rejected
          eo_message             = eo_message ).
</code></pre></div><h1 id="consulta-de-datos">
  Consulta de datos
  <a class="anchor" href="#consulta-de-datos">#</a>
</h1>
<p>Cuando se tiene la clave del registro del nodo se tiene que usar el mÃ©todo <em>retrieve</em> o <em>retrieve_by_association</em>.</p>
<h2 id="cuando-se-tiene-el-id-del-registro">
  Cuando se tiene el ID del registro
  <a class="anchor" href="#cuando-se-tiene-el-id-del-registro">#</a>
</h2>
<p><em>LT_HEADER</em> es la tabla interna que se indica en <em>Combinated table type</em></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl"> mo_svc_mngr-&gt;retrieve( EXPORTING iv_node_key             = zif_atron_file_engine_c=&gt;sc_node-root
                              it_key                  = VALUE #( ( key = iv_id_file ) )
                              iv_fill_data            = abap_false
                    IMPORTING et_data                 = lt_header ).

</code></pre></div><h2 id="los-datos-de-un-subnodo">
  Los datos de un subnodo
  <a class="anchor" href="#los-datos-de-un-subnodo">#</a>
</h2>
<p>En <em>node_key</em> se informa el nodo donde pertenece la clave que se le pasarÃ¡ <em>IT_KEY</em>. En asociaciÃ³n se indica del nodo de la key a que nodo se quiere recuperar valores. En el ejemplo la key pertenece al nodo <em>root</em> y queremos que recuperar los datos asociados a dicha clave en el nodo <em>content</em>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl"> mo_svc_mngr-&gt;retrieve_by_association(
        EXPORTING
          iv_node_key             = zif_atron_file_engine_c=&gt;sc_node-root
          it_key                  =  VALUE #( ( key = iv_id_file ) )
          iv_association          = zif_atron_file_engine_c=&gt;sc_association-root-content
          iv_fill_data = abap_true
        IMPORTING
           et_data                 = lt_content ).
</code></pre></div><h2 id="hacer-consultas">
  Hacer consultas
  <a class="anchor" href="#hacer-consultas">#</a>
</h2>
<p>Al BOPF se puede hacer bÃºsqueda por cualquier campo de los nodos que tenga. Para eso el nodo tiene que tener un tipo de bÃºsqueda de tipo *Select by elements&rdquo; en la pestaÃ±a <em>Query</em>.</p>
<p>Los parÃ¡metros de bÃºsqueda se pasan en el tipo tabla <em>/BOBF/T_FRW_QUERY_SELPARAM</em> y el mÃ©todo ha usar es el <em>QUERY</em>. Ejemplo:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">  DATA lt_header_selparams TYPE /bobf/t_frw_query_selparam.

  INSERT VALUE #( attribute_name = zif_car_bo_orders_c=&gt;sc_node_attribute-root-vkorg sign = &#39;I&#39; option = &#39;EQ&#39; low = p_vkorg ) INTO TABLE lt_header_selparams.
  INSERT VALUE #( attribute_name = zif_car_bo_orders_c=&gt;sc_node_attribute-root-vtweg sign = &#39;I&#39; option = &#39;EQ&#39; low = p_vtweg ) INTO TABLE lt_header_selparams.
  INSERT VALUE #( attribute_name = zif_car_bo_orders_c=&gt;sc_node_attribute-root-spart sign = &#39;I&#39; option = &#39;EQ&#39; low = p_spart ) INTO TABLE lt_header_selparams.

  mo_svc_mngr-&gt;query(
  EXPORTING
    iv_query_key            = zif_car_bo_orders_c=&gt;sc_query-root-select_by_elements
    it_selection_parameters = lt_header_selparams
    iv_fill_data            = abap_true
  IMPORTING
    et_data                 = et_header ).
</code></pre></div><p>El parÃ¡metro <em>IV_FILL_DATA</em> tiene que estar <em>TRUE</em> para que nos devuelva datos en el parÃ¡metro <em>ET_DATA</em>. La tabla interna donde se almacenan los datos debe ser del tipo <em>Combinated table type</em> que hay definida en el nodo.
Si solo queremos los ID de los registros se harÃ­a de la siguiente manera:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl"> mo_svc_mngr-&gt;query( EXPORTING iv_query_key            = zif_car_bo_orders_c=&gt;sc_query-positions-select_by_elements
                                      it_selection_parameters = it_positions_selparams
                                      iv_fill_data            = abap_false
                            IMPORTING et_key = DATA(lt_key_pos) ).
</code></pre></div><p>El parÃ¡metro de entrada <em>IS_QUERY_OPTIONS</em> se le puede indicar los campos de ordenaciÃ³n, nÃºmero de registros y opciones de pÃ¡ginaciÃ³n.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#objetivo">Objetivo</a></li>
    <li><a href="#instanciar-variables-para-acceder-al-bopf">Instanciar variables para acceder al BOPF</a></li>
    <li><a href="#aÃ±adir-registro">AÃ±adir registro</a>
      <ul>
        <li><a href="#nodo-root">Nodo root</a></li>
      </ul>
    </li>
    <li><a href="#subnodo-del-root">Subnodo del ROOT</a></li>
    <li><a href="#modificar-registro">Modificar registro</a></li>
    <li><a href="#modificar-datos-en-bopf">Modificar datos en BOPF</a></li>
    <li><a href="#grabar-datos-en-bopf">Grabar datos en BOPF</a></li>
    <li><a href="#consulta-de-datos">Consulta de datos</a>
      <ul>
        <li><a href="#cuando-se-tiene-el-id-del-registro">Cuando se tiene el ID del registro</a></li>
        <li><a href="#los-datos-de-un-subnodo">Los datos de un subnodo</a></li>
        <li><a href="#hacer-consultas">Hacer consultas</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












