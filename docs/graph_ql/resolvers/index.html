<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Resolvers">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Resolvers" />
<meta property="og:description" content="Resolvers" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://irodrigob.github.io/docs/graph_ql/resolvers/" />
<meta property="article:modified_time" content="2022-01-05T21:13:16+01:00" />
<title>Resolvers | Navi-developer</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.e40449dffab36960ca7d6bac529d52d7ab9f9d230ffe5de1799e29cb61bc0cb7.css" integrity="sha256-5ARJ3/qzaWDKfWusUp1S16ufnSMP/l3heZ4py2G8DLc=">
<script defer src="/en.search.min.340efa3e41420af9d0aae44193d2c2e342bfd67f65a2a994a2753e9cd43554b9.js" integrity="sha256-NA76PkFCCvnQquRBk9LC40K/1n9loqmUonU&#43;nNQ1VLk="></script>

<script defer src="/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js" integrity="sha256-dKi7B/C&#43;6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>Navi-developer</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/github/" class="collapsed ">Github</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/graph_ql/" class="collapsed ">GraphQL</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/graph_ql/cliente_servidor_graphql/" class="">Cliente/servidor GraphQL</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/graph_ql/servidor_graphql/" class="">Configurando servidor GraphQL</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/graph_ql/testing_servidor_graphql/" class="">Probando servidor GraphQL</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/graph_ql/resolvers/" class="active">Resolvers</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/graph_ql/schemas/" class="">Schemas</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/hugo/" class="">Hugo</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/hugo/publicar_web_github/" class="">Publicar Web Github</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/mongodb/" class="">MongoDB</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/mongodb/usando_app/" class="">MongoDB en aplicaciones</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/mongodb/usando_app/mongoose/" class="">Conector Mongoose</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/mongodb/cloud/" class="collapsed ">MongoDB en cloud</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/python/" class="collapsed ">Python</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/react/" class="collapsed ">React</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/" class="">SAP</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/sap/abap/" class="collapsed ">ABAP</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/BW/" class="collapsed ">BW</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/gateway/" class="collapsed ">Gateway</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/ui5/" class="collapsed ">UI5</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sap/ventas/" class="collapsed ">Ventas</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
  </ul>
  











  
<ul>
  
  <li>
    <a href="https://github.com/irodrigob" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Resolvers</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#introducción">Introducción</a></li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="introducción">
  Introducción
  <a class="anchor" href="#introducci%c3%b3n">#</a>
</h1>
<p>Los resolver son los ejecutores de lo que se ha definido en los 
  <a href="https://irodrigob.github.io/docs/graph_ql/schemas/">schemas</a>. En el resolver es donde se llama al sistema donde obtendremos, o actualizaremos, los datos que necesitemos, en nuestro caso la conexión con MongoDB. La potencia que tiene graphQL que es el sistema donde están los datos es irrelevantes porque al final se puede conectar a donde sea, como si es un fichero plano. Es más, se podría obtener la información desde dos, o más, sistemas distintos.</p>
<p>Aunque para estos ejemplos se podría haber puesto todo el código en el mismo fichero que el <em>schema</em> y el fichero <em>graphql.js</em>, conexión con el servidor, pero lo correcto es tenerlo separado por carpetas tal como ya se explico en otro artículo:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">|- pages
|--- api
|----- graphql.js
|----- resolvers
|------- index.js
|----- schemas
|------- index.js
</code></pre></div><p>Siguiendo el schema indicado en la 
  <a href="https://irodrigob.github.io/docs/graph_ql/schemas/#introducci%c3%b3n">introducción de este artículo</a> se ha definido el siguiente resolver:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">import Product from &#34;db/models/product.js&#34;;

export const resolvers = <span style="color:#75715e">{</span>
  <span style="color:#a6e22e">Query</span><span style="color:#f92672">:</span> <span style="color:#75715e">{</span>
    <span style="color:#f92672">//</span> <span style="color:#a6e22e">products</span>
    <span style="color:#a6e22e">getAll</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">async</span> <span style="color:#f92672">(</span><span style="color:#a6e22e">root</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">args</span><span style="color:#f92672">)</span> <span style="color:#f92672">=&gt;</span> <span style="color:#75715e">{</span>
      <span style="color:#a6e22e">return</span> <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">Product</span><span style="color:#f92672">.</span><span style="color:#a6e22e">find</span><span style="color:#f92672">(</span><span style="color:#75715e">{}</span><span style="color:#f92672">);</span>
    <span style="color:#75715e">}</span><span style="color:#f92672">,</span>
  <span style="color:#75715e">}</span><span style="color:#f92672">,</span>
  <span style="color:#a6e22e">Mutation</span><span style="color:#f92672">:</span> <span style="color:#75715e">{</span>
    <span style="color:#a6e22e">newProduct</span><span style="color:#f92672">:</span> <span style="color:#f92672">(</span><span style="color:#a6e22e">root</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">args</span><span style="color:#f92672">)</span> <span style="color:#f92672">=&gt;</span> <span style="color:#75715e">{</span>
      <span style="color:#a6e22e">const</span> <span style="color:#a6e22e">row</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">new</span> <span style="color:#a6e22e">Product</span><span style="color:#f92672">(</span><span style="color:#75715e">{</span> <span style="color:#f92672">...</span><span style="color:#a6e22e">args</span> <span style="color:#75715e">}</span><span style="color:#f92672">);</span>
      <span style="color:#a6e22e">return</span> <span style="color:#a6e22e">row</span><span style="color:#f92672">.</span><span style="color:#a6e22e">save</span><span style="color:#f92672">();</span>
    <span style="color:#75715e">}</span><span style="color:#f92672">,</span>    
  <span style="color:#75715e">}</span><span style="color:#f92672">,</span>  
    <span style="color:#a6e22e">newCompleteProduct</span><span style="color:#f92672">:</span> <span style="color:#f92672">(</span><span style="color:#a6e22e">root</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">args</span><span style="color:#f92672">)</span> <span style="color:#f92672">=&gt;</span> <span style="color:#75715e">{</span>
      <span style="color:#a6e22e">const</span> <span style="color:#a6e22e">row</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">new</span> <span style="color:#a6e22e">Product</span><span style="color:#f92672">(</span><span style="color:#75715e">{</span> <span style="color:#f92672">...</span><span style="color:#a6e22e">args</span><span style="color:#f92672">.</span><span style="color:#a6e22e">input</span> <span style="color:#75715e">}</span><span style="color:#f92672">);</span>
      <span style="color:#a6e22e">return</span> <span style="color:#a6e22e">row</span><span style="color:#f92672">.</span><span style="color:#a6e22e">save</span><span style="color:#f92672">();</span>
    <span style="color:#75715e">}</span><span style="color:#f92672">,</span>
<span style="color:#75715e">}</span>;
</code></pre></div><p>En este resolver lo primero es importar el modelo de Mongoose para poder hacer las peticiones. La estructura del resolver es prácticamente la misma que la que se indica en el <em>schema</em>, la diferencia que aquí no hay tipos. 
El caso de las querys son funciones <em>async</em> para permitir esperarse al resultado del proceso.</p>
<p>En cualquier caso, en todas las funciones tienen que devolver algo. Ese algo será un objeto que GraphQL mapeará a los campos del schema definido. Por ello un punto es que los campos del schema y del sistema al cual se accede tienen que tener los mismos nombres.</p>
<p>Otro detalle es que en las funciones tienen dos argumentos:</p>
<ul>
<li>root -&gt; Son los datos de la función padre. Esto se usa cuando vas construyendo consultas anidadas o quieres quieres formatear campos a partir de los obtenidos. Tengo pendiente de un ejemplo para ver como funciona.</li>
<li>args -&gt; Argumentos de la función. Esto va ligado con el parámetro <em>root</em>, ya que creo que se pasan los datos de la función superior, y también va ligado en las mutation porque son los parámetros que se definen en los schemas. En el mutation <em>newCompleteProduct</em> se recuperará el parámetro <em>input</em> que se ha definido en el schema.</li>
</ul>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#introducción">Introducción</a></li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












